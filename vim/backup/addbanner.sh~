#!/bin/bash

script=$(basename $0)

if [ ! -r "$(pwd)/banner" ]; then
	echo "$script: need readable banner file" 1>&2
	exit 1
fi

trap 'exit 0' 1 2 3 15
trap 'rm /tmp/$script.$$ 2> /dev/null' 0

for file in "$@"; do
	if [ -r "$file" -a -w "$file" ]; then
		cat banner "$file" > /tmp/$script.$$
		cp /tmp/$script.$$ $file
		echo "$script: banner added to $file" 1>&2
	else
		echo "$script: need read and write permission for $file" 1>&2
	fi
done
