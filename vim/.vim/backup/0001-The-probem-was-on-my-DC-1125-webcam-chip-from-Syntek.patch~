From a3784f840619bc4e67320ee7e7017603bb6b318b Mon Sep 17 00:00:00 2001
From: Arvydas Sidorenko <asido4@gmail.com>
Date: Tue, 13 Sep 2011 12:54:15 +0200
Subject: [PATCH 1/2] The probem was on my DC-1125 webcam chip from Syntek.
 Whenever the webcam turns on, the LED light on it is
 turn on also and never turns off again unless system is
 shut downed or restarted.

This patch will fix this issue - the LED will be turned off whenever the device
is released.

Signed-off-by: Arvydas Sidorenko <asido4@gmail.com>
---
 drivers/media/video/stk-webcam.c |    2 ++
 1 files changed, 2 insertions(+), 0 deletions(-)

diff --git a/drivers/media/video/stk-webcam.c b/drivers/media/video/stk-webcam.c
index d1a2cef..859e78f 100644
--- a/drivers/media/video/stk-webcam.c
+++ b/drivers/media/video/stk-webcam.c
@@ -574,6 +574,8 @@ static int v4l_stk_release(struct file *fp)
 	if (dev->owner == fp) {
 		stk_stop_stream(dev);
 		stk_free_buffers(dev);
+		stk_camera_write_reg(dev, 0x0, 0x48); /* turn off the LED */
+		unset_initialised(dev);
 		dev->owner = NULL;
 	}
 
-- 
1.7.4.4

