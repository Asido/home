<html>
<head>
	<title>Site submission results</title>
</head>

<body>
	<h1>Site submission results</h1>
	<?php
		// Extract form fields
		$url = $_REQUEST['url'];
		$email = $_REQUEST['email'];

		// Check the url
		$url = parse_url($url);
		$host = $url['host'];
		if (!($ip = gethostbyname($host))) {
			echo "Host for URL does not have valid IP";
			exit;
		}

		echo "Host is at IP ".$ip."<br/>";

		// Check the email address
		$email = explode('@', $email);
		$emailhost = $email[1];

		// Note that the dns_get_mx() function is NOT implemented in windows version of PHP
		if (!dns_get_mx($emailhost, $mxhostarr)) {
			echo "Email address is not at valid host";
			exit;
		}

		echo "Email is delivered via: ";
		foreach ($mxhostarr as $mx)
			echo $mx." ";

		// If reached here, all ok
		echo "<br/>All submited details are ok.<br/>";
		echo "Thank you for submitting your site.<br/>"
			."It will be visited by one of our staff members soon.";

		// In real case, add waiting to the database...
		// ...
	?>
</body>
</html>
