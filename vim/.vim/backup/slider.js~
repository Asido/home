$(document).ready(function() {
	var sliding_px = 660;
	var slider = new Slider();

	var pos_up = 1;
	$('#slide1-up').click(function(){
		if (!$("#slide-wrap-up").is(":animated")) {
			set_selected_slide_button("1", "up");
			slider.move("#slide-wrap-up", 0);
			pos_up = 1;
		}
	});
	$('#slide2-up').click(function(){
		if (!$("#slide-wrap-up").is(":animated")) {
			set_selected_slide_button("2", "up");
			slider.move("#slide-wrap-up", sliding_px * -1);
			pos_up = 2;
		}
	});
	$('#slide3-up').click(function(){
		if (!$("#slide-wrap-up").is(":animated")) {
			set_selected_slide_button("3", "up");
			slider.move("#slide-wrap-up", sliding_px * -2);
			pos_up=3;
		}
	});
	$('#slideprev-up').click(function(){
		if(pos_up == 2)
			$('#slide1-up').click();
		else if (pos_up == 3)
			$('#slide2-up').click();
		else if (pos_up == 1)
			$('#slide3-up').click();
	});
	$('#slidenext-up').click(function(){
		if(pos_up == 1)
			$('#slide2-up').click();
		else if(pos_up == 2)
			$('#slide3-up').click();
		else if (pos_up == 3)
			$('#slide1-up').click();
	});

	var pos_down = 1;
	$('#slide1-down').click(function(){
		set_selected_slide_button("1", "down");
		slider.move("#slide-wrap-down", 0);
		pos_down = 1;
	});
	$('#slide2-down').click(function(){
		set_selected_slide_button("2", "down");
		slider.move("#slide-wrap-down", sliding_px * -1);
		pos_down = 2;
	});
	$('#slide3-down').click(function(){
		set_selected_slide_button("3", "down");
		slider.move("#slide-wrap-down", sliding_px * -2);
		pos_down=3;
	});
	$('#slideprev-down').click(function(){
		if(pos_down == 2)
			$('#slide1-down').click();
		else if (pos_down == 3)
			$('#slide2-down').click();
		else if (pos_down == 1)
			$('#slide3-down').click();
	});
	$('#slidenext-down').click(function(){
		if(pos_down == 1)
			$('#slide2-down').click();
		else if(pos_down == 2)
			$('#slide3-down').click();
		else if (pos_down == 3)
			$('#slide1-down').click();
	});

	// start auto-sliding
	slider.reset_timeout('#slidenext-up');
	slider.reset_timeout('#slidenext-down');

	function set_selected_slide_button(nr, slider)
	{
		$(".toggle-bar-list-"+slider+" li div").removeClass("slide-selected");
		$("#slide"+nr+"-"+slider).addClass("slide-selected");
	}
});

function Slider()
{
	this.slide_delay = 7000; // 7s
	this.higher_timeout;
	this.lower_timeout;
}

Slider.prototype = {
	move : function(tag_id, left)
	{
		if (tag_id.indexOf("up") != -1)
			this.reset_timeout("#slidenext-up");
		else
			this.reset_timeout("#slidenext-down");
		$(tag_id).animate({left: left}, 500);
	},

	reset_timeout : function(tag_id)
	{
		if (tag_id.indexOf("up") != -1) {
			clearTimeout(this.higher_timeout);
			this.higher_timeout = setTimeout(function() { $(tag_id).trigger("click"); }, this.slide_delay);
		} else {
			clearTimeout(this.lower_timeout);
			this.lower_timeout = setTimeout(function() { $(tag_id).trigger("click"); }, this.slide_delay);
		}
	}
}
